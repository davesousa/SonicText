<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SonicText Optimization</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="settings-container">
        <div class="header">
            <h2>Text Optimization</h2>
            <button class="close-button" id="closeButton">Ã—</button>
        </div>
        <div class="setting-group">
            <div class="setting-row">
                <label class="toggle-switch">
                    <input type="checkbox" id="enableOptimize">
                    <span class="toggle-slider"></span>
                </label>
                <span class="setting-label">Enable text optimization</span>
            </div>
            <div class="mode-buttons">
                <button class="mode-button" data-mode="basic">
                    <span class="mode-button-title">Basic Mode</span>
                    <span class="mode-button-description">Cleans up transcription by fixing grammar, removing filler words, and adding proper punctuation.</span>
                </button>
                <button class="mode-button" data-mode="professional">
                    <span class="mode-button-title">Professional Mode</span>
                    <span class="mode-button-description">Polishes text for business communication while preserving the original message.</span>
                </button>
                <button class="mode-button" data-mode="dev">
                    <span class="mode-button-title">Developer Mode</span>
                    <span class="mode-button-description">Structures text for technical documentation and AI prompts with precise language.</span>
                </button>
            </div>
        </div>
    </div>
    <script>
        const { ipcRenderer } = require('electron');
        const enableOptimize = document.getElementById('enableOptimize');
        const modeButtons = document.querySelectorAll('.mode-button');
        const closeButton = document.getElementById('closeButton');
        let currentMode = 'professional';

        // Get current settings from main process
        ipcRenderer.send('get-optimize-settings');
        ipcRenderer.send('get-theme');

        function updateModeButtons(mode) {
            modeButtons.forEach(button => {
                button.classList.toggle('active', enableOptimize.checked && button.dataset.mode === mode);
            });
            document.body.classList.toggle('optimization-disabled', !enableOptimize.checked);
        }

        function updateSettings(enabled, mode) {
            const settings = { enabled, mode };
            ipcRenderer.send('update-optimize-settings', settings);
            updateModeButtons(mode);
            currentMode = mode;
        }

        ipcRenderer.on('optimize-settings', (event, settings) => {
            enableOptimize.checked = settings.enabled;
            currentMode = settings.mode;
            updateModeButtons(settings.mode);
        });

        ipcRenderer.on('current-theme', (event, theme) => {
            if (theme === 'light') {
                document.body.classList.add('light-theme');
            } else {
                document.body.classList.remove('light-theme');
            }
        });

        ipcRenderer.on('theme-changed', (event, theme) => {
            if (theme === 'light') {
                document.body.classList.add('light-theme');
            } else {
                document.body.classList.remove('light-theme');
            }
        });

        // Handle enable/disable toggle
        enableOptimize.addEventListener('change', () => {
            updateSettings(enableOptimize.checked, currentMode);
        });

        // Handle mode selection
        modeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const mode = button.dataset.mode;
                enableOptimize.checked = true;
                updateSettings(true, mode);
            });
        });

        // Handle close button
        closeButton.addEventListener('click', () => {
            ipcRenderer.send('close-optimize');
        });
    </script>
</body>
</html> 